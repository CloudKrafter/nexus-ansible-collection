# defaults file for nexus3-config-as-code
nexus_api_scheme: http
nexus_api_hostname: 172.18.0.5
nexus_api_port: 8081
nexus_api_validate_certs: "{{ nexus_api_scheme == 'https' }}"
nexus_api_timeout: 60
nexus_s3_endpoint: "http://172.18.0.4:9000"
nexus_admin_username: admin
nexus_admin_password: changeme
nexus_enable_pro_version: true

nexus_config_maven: true
nexus_config_docker: true
nexus_config_gitlfs: true
nexus_config_npm: false
nexus_config_pypi: false
nexus_config_conda: false
nexus_config_helm: false
nexus_config_r: false
nexus_config_nuget: false
nexus_config_apt: false
nexus_config_yum: false
nexus_config_raw: false
nexus_config_p2: false
nexus_config_cocoapods: false
nexus_config_conan: false
nexus_config_go: false
nexus_config_cargo: false
nexus_config_rubygems: false

ldap_connections:
  - name: Mock ldap server STATIC # Required
    protocol: LDAPS # Required. Values: "LDAP" or "LDAPS"
    host: "{{ nexus_hostname }}" # Required
    searchBase: dc=slapd-server-mock # Required
    port: 389 # Required
    groupType: STATIC # Required if ldapGroupsAsRoles is true. Values: "DYNAMIC" or "STATIC"
    groupObjectClass: posixGroup # Required if groupType is static
    groupIdAttribute: cn # Required if groupType is static
    groupMemberAttribute: memberUID # Required if groupType is static
    groupMemberFormat: ${username} # Required if groupType is static
    #userMemberOfAttribute: memberOf # Required if groupType is dynamic
    authScheme: "NONE" # Required. Values: "NONE","SIMPLE","DIGEST_MD5" or "CRAM_MD5"
    #authRealm: # Required if authScheme is CRAM_MD5 or DIGEST_MD5
    #authUsername: # Required if authScheme other than NONE
    #authPassword: # Required if authScheme other than NONE
    connectionTimeoutSeconds: 30 # Required
    connectionRetryDelaySeconds: 300 # Required
    maxIncidentsCount: 3 # Required
    useTrustStore: true
    userBaseDn: ou=people
    userLdapFilter: (|(mail=*@example.com)(uid=dom*))
    userIdAttribute: guid
    userRealNameAttribute: usrPrincipalName
    userEmailAddressAttribute: email
    userPasswordAttribute: pswd
    userObjectClass: person
    ldapGroupsAsRoles: true
    groupBaseDn: ou=groups
    userSubtree: false
    groupSubtree: false
  - name: Mock ldap server DYNAMIC # Required
    protocol: LDAP # Required. Values: "LDAP" or "LDAPS"
    host: "{{ nexus_hostname }}" # Required
    searchBase: dc=slapd-server-mock # Required
    port: 389 # Required
    groupType: DYNAMIC # Required if ldapGroupsAsRoles is true. Values: "DYNAMIC" or "STATIC"
    #groupObjectClass: posixGroup # Required if groupType is static
    #groupIdAttribute: cn # Required if groupType is static
    #groupMemberAttribute: memberUID # Required if groupType is static
    #groupMemberFormat: ${username} # Required if groupType is static
    userMemberOfAttribute: memberOf # Required if groupType is dynamic
    authScheme: "NONE" # Required. Values: "NONE","SIMPLE","DIGEST_MD5" or "CRAM_MD5"
    #authRealm: # Required if authScheme is CRAM_MD5 or DIGEST_MD5
    #authUsername: # Required if authScheme other than NONE
    #authPassword: # Required if authScheme other than NONE
    connectionTimeoutSeconds: 30 # Required
    connectionRetryDelaySeconds: 300 # Required
    maxIncidentsCount: 3 # Required
    # useTrustStore: false
    #userBaseDn: ou=people
    #userLdapFilter: (|(mail=*@example.com)(uid=dom*))
    userIdAttribute: guid # Required
    userRealNameAttribute: usrPrincipalName # Required
    userEmailAddressAttribute: email # Required
    #userPasswordAttribute: pswd
    userObjectClass: person # Required
    ldapGroupsAsRoles: true
    #groupBaseDn: "ou=devs"
    #userSubtree: false
    #groupSubtree: false

nexus_ssl_truststore:
  certificates:
    - name: |
        -----BEGIN CERTIFICATE-----
        MIINSzCCDPCgAwIBAgIRALENaoDfHQCPCsSRmfFSR0owCgYIKoZIzj0EAwIwOzEL
        MAkGA1UEBhMCVVMxHjAcBgNVBAoTFUdvb2dsZSBUcnVzdCBTZXJ2aWNlczEMMAoG
        A1UEAxMDV0UyMB4XDTI0MTAyMTA4MzcxMFoXDTI1MDExMzA4MzcwOVowFzEVMBMG
        A1UEAwwMKi5nb29nbGUuY29tMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEKfIz
        THLvGZwJudei/s/wAjkUXMNLxYcYZcE4HrIWrAgn93s6LqiOWnvMmNi+01kKrKZ9
        Q3mgitJudTZM4qn8TaOCC/cwggvzMA4GA1UdDwEB/wQEAwIHgDATBgNVHSUEDDAK
        BggrBgEFBQcDATAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBSu8CN6nAmULb6h6tZZ
        lZbLhf+QWDAfBgNVHSMEGDAWgBR1vsR3ron2RDd9z7FoHx0a69w0WTBYBggrBgEF
        BQcBAQRMMEowIQYIKwYBBQUHMAGGFWh0dHA6Ly9vLnBraS5nb29nL3dlMjAlBggr
        BgEFBQcwAoYZaHR0cDovL2kucGtpLmdvb2cvd2UyLmNydDCCCc0GA1UdEQSCCcQw
        ggnAggwqLmdvb2dsZS5jb22CFiouYXBwZW5naW5lLmdvb2dsZS5jb22CCSouYmRu
        LmRldoIVKi5vcmlnaW4tdGVzdC5iZG4uZGV2ghIqLmNsb3VkLmdvb2dsZS5jb22C
        GCouY3Jvd2Rzb3VyY2UuZ29vZ2xlLmNvbYIYKi5kYXRhY29tcHV0ZS5nb29nbGUu
        Y29tggsqLmdvb2dsZS5jYYILKi5nb29nbGUuY2yCDiouZ29vZ2xlLmNvLmlugg4q
        Lmdvb2dsZS5jby5qcIIOKi5nb29nbGUuY28udWuCDyouZ29vZ2xlLmNvbS5hcoIP
        Ki5nb29nbGUuY29tLmF1gg8qLmdvb2dsZS5jb20uYnKCDyouZ29vZ2xlLmNvbS5j
        b4IPKi5nb29nbGUuY29tLm14gg8qLmdvb2dsZS5jb20udHKCDyouZ29vZ2xlLmNv
        bS52boILKi5nb29nbGUuZGWCCyouZ29vZ2xlLmVzggsqLmdvb2dsZS5mcoILKi5n
        b29nbGUuaHWCCyouZ29vZ2xlLml0ggsqLmdvb2dsZS5ubIILKi5nb29nbGUucGyC
        CyouZ29vZ2xlLnB0gg8qLmdvb2dsZWFwaXMuY26CESouZ29vZ2xldmlkZW8uY29t
        ggwqLmdzdGF0aWMuY26CECouZ3N0YXRpYy1jbi5jb22CD2dvb2dsZWNuYXBwcy5j
        boIRKi5nb29nbGVjbmFwcHMuY26CEWdvb2dsZWFwcHMtY24uY29tghMqLmdvb2ds
        ZWFwcHMtY24uY29tggxna2VjbmFwcHMuY26CDiouZ2tlY25hcHBzLmNughJnb29n
        bGVkb3dubG9hZHMuY26CFCouZ29vZ2xlZG93bmxvYWRzLmNughByZWNhcHRjaGEu
        bmV0LmNughIqLnJlY2FwdGNoYS5uZXQuY26CEHJlY2FwdGNoYS1jbi5uZXSCEiou
        cmVjYXB0Y2hhLWNuLm5ldIILd2lkZXZpbmUuY26CDSoud2lkZXZpbmUuY26CEWFt
        cHByb2plY3Qub3JnLmNughMqLmFtcHByb2plY3Qub3JnLmNughFhbXBwcm9qZWN0
        Lm5ldC5jboITKi5hbXBwcm9qZWN0Lm5ldC5jboIXZ29vZ2xlLWFuYWx5dGljcy1j
        bi5jb22CGSouZ29vZ2xlLWFuYWx5dGljcy1jbi5jb22CF2dvb2dsZWFkc2Vydmlj
        ZXMtY24uY29tghkqLmdvb2dsZWFkc2VydmljZXMtY24uY29tghFnb29nbGV2YWRz
        LWNuLmNvbYITKi5nb29nbGV2YWRzLWNuLmNvbYIRZ29vZ2xlYXBpcy1jbi5jb22C
        EyouZ29vZ2xlYXBpcy1jbi5jb22CFWdvb2dsZW9wdGltaXplLWNuLmNvbYIXKi5n
        b29nbGVvcHRpbWl6ZS1jbi5jb22CEmRvdWJsZWNsaWNrLWNuLm5ldIIUKi5kb3Vi
        bGVjbGljay1jbi5uZXSCGCouZmxzLmRvdWJsZWNsaWNrLWNuLm5ldIIWKi5nLmRv
        dWJsZWNsaWNrLWNuLm5ldIIOZG91YmxlY2xpY2suY26CECouZG91YmxlY2xpY2su
        Y26CFCouZmxzLmRvdWJsZWNsaWNrLmNughIqLmcuZG91YmxlY2xpY2suY26CEWRh
        cnRzZWFyY2gtY24ubmV0ghMqLmRhcnRzZWFyY2gtY24ubmV0gh1nb29nbGV0cmF2
        ZWxhZHNlcnZpY2VzLWNuLmNvbYIfKi5nb29nbGV0cmF2ZWxhZHNlcnZpY2VzLWNu
        LmNvbYIYZ29vZ2xldGFnc2VydmljZXMtY24uY29tghoqLmdvb2dsZXRhZ3NlcnZp
        Y2VzLWNuLmNvbYIXZ29vZ2xldGFnbWFuYWdlci1jbi5jb22CGSouZ29vZ2xldGFn
        bWFuYWdlci1jbi5jb22CGGdvb2dsZXN5bmRpY2F0aW9uLWNuLmNvbYIaKi5nb29n
        bGVzeW5kaWNhdGlvbi1jbi5jb22CJCouc2FmZWZyYW1lLmdvb2dsZXN5bmRpY2F0
        aW9uLWNuLmNvbYIWYXBwLW1lYXN1cmVtZW50LWNuLmNvbYIYKi5hcHAtbWVhc3Vy
        ZW1lbnQtY24uY29tggtndnQxLWNuLmNvbYINKi5ndnQxLWNuLmNvbYILZ3Z0Mi1j
        bi5jb22CDSouZ3Z0Mi1jbi5jb22CCzJtZG4tY24ubmV0gg0qLjJtZG4tY24ubmV0
        ghRnb29nbGVmbGlnaHRzLWNuLm5ldIIWKi5nb29nbGVmbGlnaHRzLWNuLm5ldIIM
        YWRtb2ItY24uY29tgg4qLmFkbW9iLWNuLmNvbYIUZ29vZ2xlc2FuZGJveC1jbi5j
        b22CFiouZ29vZ2xlc2FuZGJveC1jbi5jb22CHiouc2FmZW51cC5nb29nbGVzYW5k
        Ym94LWNuLmNvbYINKi5nc3RhdGljLmNvbYIUKi5tZXRyaWMuZ3N0YXRpYy5jb22C
        CiouZ3Z0MS5jb22CESouZ2NwY2RuLmd2dDEuY29tggoqLmd2dDIuY29tgg4qLmdj
        cC5ndnQyLmNvbYIQKi51cmwuZ29vZ2xlLmNvbYIWKi55b3V0dWJlLW5vY29va2ll
        LmNvbYILKi55dGltZy5jb22CC2FuZHJvaWQuY29tgg0qLmFuZHJvaWQuY29tghMq
        LmZsYXNoLmFuZHJvaWQuY29tggRnLmNuggYqLmcuY26CBGcuY2+CBiouZy5jb4IG
        Z29vLmdsggp3d3cuZ29vLmdsghRnb29nbGUtYW5hbHl0aWNzLmNvbYIWKi5nb29n
        bGUtYW5hbHl0aWNzLmNvbYIKZ29vZ2xlLmNvbYISZ29vZ2xlY29tbWVyY2UuY29t
        ghQqLmdvb2dsZWNvbW1lcmNlLmNvbYIIZ2dwaHQuY26CCiouZ2dwaHQuY26CCnVy
        Y2hpbi5jb22CDCoudXJjaGluLmNvbYIIeW91dHUuYmWCC3lvdXR1YmUuY29tgg0q
        LnlvdXR1YmUuY29tghFtdXNpYy55b3V0dWJlLmNvbYITKi5tdXNpYy55b3V0dWJl
        LmNvbYIUeW91dHViZWVkdWNhdGlvbi5jb22CFioueW91dHViZWVkdWNhdGlvbi5j
        b22CD3lvdXR1YmVraWRzLmNvbYIRKi55b3V0dWJla2lkcy5jb22CBXl0LmJlggcq
        Lnl0LmJlghphbmRyb2lkLmNsaWVudHMuZ29vZ2xlLmNvbYITKi5hbmRyb2lkLmdv
        b2dsZS5jboISKi5jaHJvbWUuZ29vZ2xlLmNughYqLmRldmVsb3BlcnMuZ29vZ2xl
        LmNuMBMGA1UdIAQMMAowCAYGZ4EMAQIBMDYGA1UdHwQvMC0wK6ApoCeGJWh0dHA6
        Ly9jLnBraS5nb29nL3dlMi9kVE0zLTBocFdmRS5jcmwwggEEBgorBgEEAdZ5AgQC
        BIH1BIHyAPAAdgDPEVbu1S58r/OHW9lpLpvpGnFnSrAX7KwB0lt3zsw7CAAAAZKu
        cA9xAAAEAwBHMEUCIQCbTZU72Cgp+DoB9xIemstS+rsjkSPw1iKBYOuBwaKYDgIg
        EPL6pt2zl9QxsfvB3wF9OZBttaZzwUyFYubdi5iITa8AdgCi4wrkRe+9rZt+OO1H
        Z3dT14JbhJTXK14bLMS5UKRH5wAAAZKucA9QAAAEAwBHMEUCIQCfZvWCuVhMtfqT
        7WiWlAbetWyOawiphgqVAb40N6QrZQIgF6ir8vFC3rW4MjPgsSQM0SQ6QDXhPS4z
        H1RHyT/1dXgwCgYIKoZIzj0EAwIDSQAwRgIhAJXLRMCydgRn9cElF+64v2m+ytT6
        EfB6fTRKLV3yVcowAiEA0LwPjuMqh8xIDZBLmo7efDcFnnb8jz3QijtvJvM7q7I=
        -----END CERTIFICATE-----
  hostnames:
    - host: gitlab.com
      port: 443
    - host: github.com
      port: 443

nexus_security_realms:
  - NexusAuthenticatingRealm
  - NuGetApiKey
  - ConanToken
  - DefaultRole
  - DockerToken
  - LdapRealm
  - NpmToken
  - rutauth-realm

nexus_blobstores:
  - name: default
    type: File
    path: default
    softQuota:
      type: spaceRemainingQuota
      limit: 104857600
  - name: file-quota-100-remaining
    type: File
    path: file-quota-100-remaining
    softQuota:
      type: spaceRemainingQuota
      limit: 104857600
  - name: file-quota-100-used
    type: File
    path: file-quota-100-used
    softQuota:
      type: spaceUsedQuota
      limit: 104857600
  - name: file-quota-200-used
    type: File
    path: file-quota-200-used
    softQuota:
      type: spaceUsedQuota
      limit: 209715200
  - name: maven-legacy-blobstore
    type: File
    path: maven-legacy-blobstore
    softQuota:
      type: spaceRemainingQuota
      limit: 104857600
  - name: legacy-minimal-blobstore
    type: File
    path: legacy-minimal-blobstore
    softQuota:
      type: spaceRemainingQuota
      limit: 104857600
  - name: custom-blobstore-legacy
    type: File
    path: custom-blobstore-legacy
    softQuota:
      type: spaceRemainingQuota
      limit: 104857600
  - name: legacy-blobstore-complete
    type: File
    path: legacy-blobstore-complete
    softQuota:
      type: spaceRemainingQuota
      limit: 104857600
  - name: custom-blobstore-new
    type: File
    path: custom-blobstore-new
    softQuota:
      type: spaceRemainingQuota
      limit: 104857600
  - name: mixed-blobstore
    type: File
    path: mixed-blobstore
    softQuota:
      type: spaceRemainingQuota
      limit: 104857600
  - name: overridden-blobstore
    type: File
    path: overridden-blobstore
    softQuota:
      type: spaceRemainingQuota
      limit: 104857600
  - name: s3-blob-1
    type: S3
    softQuota:
      type: spaceUsedQuota
      limit: 104857600
    bucketConfiguration:
      bucket:
        region: us-east-1
        name: nexus-s3-1
        prefix: ""
        expiration: 3
      failoverBuckets: []
      activeRegion: us-east-1
      bucketSecurity:
        accessKeyId: nexus-access-key
        secretAccessKey: nexus-secret-key
      advancedBucketConnection:
        endpoint: "{{ nexus_s3_endpoint }}"
        forcePathStyle: true
  - name: s3-blob-2
    type: S3
    softQuota:
      type: spaceUsedQuota
      limit: 104857600
    bucketConfiguration:
      bucket:
        region: us-east-1
        name: nexus-s3-2
        expiration: 3
      bucketSecurity:
        accessKeyId: nexus-access-key
        secretAccessKey: nexus-secret-key
      advancedBucketConnection:
        endpoint: "{{ nexus_s3_endpoint }}"
        forcePathStyle: true
  - name: s3-blob-3
    type: S3
    softQuota:
      type: spaceUsedQuota
      limit: 104857600
    bucketConfiguration:
      bucket:
        region: us-east-1
        name: nexus-s3-3
        expiration: 3
      bucketSecurity:
        accessKeyId: nexus-access-key
        secretAccessKey: nexus-secret-key
      advancedBucketConnection:
        endpoint: "{{ nexus_s3_endpoint }}"
        forcePathStyle: true
  - name: s3-blob-4
    type: S3
    softQuota:
      type: spaceUsedQuota
      limit: 104857600
    bucketConfiguration:
      bucket:
        region: us-east-1
        name: nexus-s3-4
        expiration: 3
      bucketSecurity:
        accessKeyId: nexus-access-key
        secretAccessKey: nexus-secret-key
      advancedBucketConnection:
        endpoint: "{{ nexus_s3_endpoint }}"
        forcePathStyle: true
  - name: s3-blob-5
    type: S3
    softQuota:
      type: spaceUsedQuota
      limit: 104857600
    bucketConfiguration:
      bucket:
        region: us-east-1
        name: nexus-s3-5
        expiration: 3
      bucketSecurity:
        accessKeyId: nexus-access-key
        secretAccessKey: nexus-secret-key
      advancedBucketConnection:
        endpoint: "{{ nexus_s3_endpoint }}"
        forcePathStyle: true
  - name: s3-grp
    type: Group
    softQuota:
      type: spaceUsedQuota
      limit: 104857600
    members:
      - s3-blob-1
      - s3-blob-2
    fillPolicy: roundRobin
  - name: s3-grp-2
    type: Group
    softQuota:
      type: spaceRemainingQuota
      limit: 104857600
    members:
      - s3-blob-3
      - s3-blob-4
    fillPolicy: writeToFirst
  - name: mixed-grp-1
    type: Group
    softQuota:
      type: spaceUsedQuota
      limit: 104857600
    members:
      - s3-blob-5
      - file-quota-100-used
    fillPolicy: roundRobin
  - name: file-grp-1
    type: Group
    softQuota:
      type: spaceUsedQuota
      limit: 104857600
    members:
      - file-quota-200-used
      - file-quota-100-remaining
    fillPolicy: roundRobin

nexus_roles:
  - id: "nx-admin"
    name: "nx-admin"
    description: "Administrator Role"
    privileges:
      - "nx-all"
    roles: []
  - id: "nx-anonymous"
    name: "nx-anonymous"
    description: "Anonymous Role"
    privileges:
      - "nx-healthcheck-read"
      - "nx-search-read"
      - "nx-repository-view-*-*-read"
      - "nx-repository-view-*-*-browse"
    roles: []
  - id: "nx-developer"
    name: "nx-developer"
    description: "Developer Role"
    privileges:
      - "nx-repository-view-*-*-read"
      - "nx-repository-view-*-*-browse"
      - "nx-repository-view-*-*-edit"
      - "nx-repository-view-*-*-add"
      - "nx-repository-view-*-*-delete"
  - id: "nx-security-admin"
    name: "nx-security-admin"
    description: "Security Administrator Role"
    privileges:
      - "nx-all"
    roles:
      - "nx-admin"

nexus_anonymous_access:
  enabled: true
  userId: anonymous
  realmName: NexusAuthorizingRealm

nexus_content_selectors:
  - name: raw-selector
    type: csel
    description: raw-selectorrr
    expression: format == "raw"
  - name: maven-org-selector
    type: csel
    description: maven-org-selectorrr
    expression: format == "maven2" and path =^ "/org"
  - name: maven-com-selector
    type: csel
    description: maven-com-selector
    expression: format == "maven2" and path =^ "/com"

nexus_user_tokens_capability:
  enabled: true
  protectContent: true
  expirationEnabled: true
  expirationDays: 180

nexus_default_user_password: changeme
nexus_local_users:
  - userId: anonymous
    firstName: Anonymous
    lastName: User
    emailAddress: anonymous@example.org
    source: default
    status: active
    readOnly: false
    roles:
      - nx-anonymous
    externalRoles: []
  - userId: admin
    firstName: Administrator
    lastName: User
    emailAddress: admin@example.org
    source: default
    status: active
    readOnly: false
    roles:
      - nx-admin
    externalRoles: []
  - userId: disabled-user
    firstName: Disabled
    lastName: User
    emailAddress: info@users.org
    source: default
    status: disabled
    readOnly: false
    roles:
      - nx-anonymous
    externalRoles: []
  - userId: secondary-admin
    firstName: Secondary
    lastName: AdminUser
    emailAddress: test@test.com
    source: default
    status: active
    readOnly: false
    roles:
      - nx-anonymous
      - nx-admin
    externalRoles: []
  - userId: read-only-user
    firstName: Read
    lastName: OnlyUser
    emailAddress: readonly@users.org
    source: default
    status: active
    readOnly: true
    roles:
      - nx-anonymous
    externalRoles: []
  - username: jenkins-nexus-oss
    first_name: Jenkins
    last_name: CI
    email: support@company.com
    password: s3cr3t
    roles:
      - nx-anonymous

nexus_repos_cleanup_policies:
  - name: mvn_cleanup_legacy_format
    format: maven2
    criteria:
      lastBlobUpdated: 90
      lastDownloaded: 150
  - name: cargo_cleanup_config_api
    format: cargo
    notes: "cargo"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: maven_cleanup_config_api
    format: maven2
    notes: "maven"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: maven_releases_cleanup_config_api
    format: maven2
    notes: "maven RELEASES"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaReleaseType: RELEASES
    criteriaAssetRegex: "your-regex*"
  - name: maven_prereleases_cleanup_config_api
    format: maven2
    notes: "maven PRERELEASES"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaReleaseType: PRERELEASES
    criteriaAssetRegex: "your-regex*"
  - name: python_cleanup_config_api
    format: pypi
    notes: "Python pip"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: docker_cleanup_config_api
    format: docker
    notes: "Docker"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: raw_cleanup_config_api
    format: raw
    notes: "Raw"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: rubygems_cleanup_config_api
    format: rubygems
    notes: "Rubygems"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: npm_cleanup_config_api
    format: npm
    notes: ""
    criteriaAssetRegex: "your-regex*"
  - name: npm_releases_cleanup_config_api
    format: npm
    notes: "npm RELEASES"
    criteriaAssetRegex: "your-regex*"
    criteriaReleaseType: RELEASES
  - name: npm_prereleases_cleanup_config_api
    format: npm
    notes: "npm PRERELEASES"
    criteriaAssetRegex: "your-regex*"
    criteriaReleaseType: PRERELEASES
  - name: nuget_cleanup_config_api
    format: nuget
    notes: "NuGet"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: gitlfs_cleanup_config_api
    format: gitlfs
    notes: "gitlfs"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
  - name: yum_prerelease_cleanup_config_api
    format: yum
    notes: "yum PRERELEASES"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
    criteriaReleaseType: PRERELEASES
  - name: yum_releases_cleanup_config_api
    format: yum
    notes: "yum RELEASES"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
    criteriaReleaseType: PRERELEASES
  - name: yum_cleanup_config_api
    format: yum
    notes: "yum"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: apt_cleanup_config_api
    format: apt
    notes: "apt"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: helm_cleanup_config_api
    format: helm
    notes: "Helm"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: r_cleanup_config_api
    format: r
    notes: "r"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: conda_cleanup_config_api
    format: conda
    notes: "conda"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: go_cleanup_config_api
    format: go
    notes: "go"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: cocoapods_cleanup_config_api
    format: cocoapods
    notes: "cocoapods"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: conan_cleanup_config_api
    format: conan
    notes: "conan"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: p2_cleanup_config_api
    format: p2
    notes: "p2-notes"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: mvn_cleanup_nexus_oss
    format: maven2
    notes: "mvn"
    criteria:
      lastBlobUpdated: 60
      lastDownloaded: 120
  - name: mvn_releases_cleanup_nexus_oss
    format: maven2
    notes: "mvn RELEASES"
    criteria:
      lastBlobUpdated: 60
      lastDownloaded: 120
      isPrerelease: RELEASES
  - name: mvn_prereleases_cleanup_nexus_oss
    format: maven2
    notes: "mvn PRERELEASES"
    criteria:
      lastBlobUpdated: 60
      lastDownloaded: 120
      isPrerelease: PRERELEASES
  - name: python_cleanup_nexus_oss
    format: pypi
    notes: "Python pip"
    criteria:
      lastBlobUpdated: 60
      lastDownloaded: 120
      regexKey: "beta-*"
  - name: docker_cleanup_nexus_oss
    format: docker
    notes: "Docker"
    criteria:
      lastBlobUpdated: 60
      lastDownloaded: 120
      regexKey: "beta-*"
  - name: raw_cleanup_nexus_oss
    format: raw
    notes: "Raw"
    criteria:
      lastBlobUpdated: 60
      lastDownloaded: 120
      regexKey: "beta-*"
  - name: rubygems_cleanup_nexus_oss
    format: rubygems
    notes: "Rubygems"
    criteria:
      lastBlobUpdated: 60
      lastDownloaded: 120
      regexKey: "beta-*"
  - name: npm_cleanup_nexus_oss
    format: npm
    notes: ""
    criteria:
      regexKey: "beta-*"
  - name: npm_releases_cleanup_nexus_oss
    format: npm
    notes: "npm RELEASES"
    criteria:
      regexKey: "beta-*"
      isPrerelease: RELEASES
  - name: npm_prereleases_cleanup_nexus_oss
    format: npm
    notes: "npm PRERELEASES"
    criteria:
      regexKey: "beta-*"
      isPrerelease: PRERELEASES
  - name: nuget_cleanup_nexus_oss
    format: nuget
    notes: "NuGet"
    criteria:
      lastBlobUpdated: 60
      lastDownloaded: 120
      regexKey: "beta-*"
  - name: gitlfs_cleanup_nexus_oss
    format: gitlfs
    notes: "gitlfs"
    criteria:
      lastBlobUpdated: 60
      lastDownloaded: 120
  - name: yum_prerelease_cleanup_nexus_oss
    format: yum
    notes: "yum PRERELEASES"
    criteria:
      lastBlobUpdated: 60
      lastDownloaded: 120
      regexKey: "beta-*"
      isPrerelease: PRERELEASES
  - name: yum_release_cleanup_nexus_oss
    format: yum
    notes: "yum RELEASES"
    criteria:
      lastBlobUpdated: 60
      lastDownloaded: 120
      regexKey: "beta-*"
      isPrerelease: RELEASES
  - name: yum_cleanup_nexus_oss
    format: yum
    notes: "yum"
    criteria:
      lastBlobUpdated: 60
      lastDownloaded: 120
      regexKey: "beta-*"
  - name: apt_cleanup_nexus_oss
    format: apt
    notes: "apt"
    criteria:
      lastBlobUpdated: 60
      lastDownloaded: 120
      regexKey: "beta-*"
  - name: helm_cleanup_nexus_oss
    format: helm
    notes: "Helm"
    criteria:
      lastBlobUpdated: 60
      lastDownloaded: 120
      regexKey: "beta-*"
  - name: r_cleanup_nexus_oss
    format: r
    notes: "r"
    criteria:
      lastBlobUpdated: 60
      lastDownloaded: 120
      regexKey: "beta-*"
  - name: conda_cleanup_nexus_oss
    format: conda
    notes: "conda"
    criteria:
      lastBlobUpdated: 60
      lastDownloaded: 120
      regexKey: "beta-*"
  - name: go_cleanup_nexus_oss
    format: go
    notes: "go"
    criteria:
      lastBlobUpdated: 60
      lastDownloaded: 120
      regexKey: "beta-*"
  - name: cocoapods_cleanup_nexus_oss
    format: cocoapods
    notes: "cocoapods"
    criteria:
      lastBlobUpdated: 60
      lastDownloaded: 120
      regexKey: "beta-*"
  - name: conan_cleanup_nexus_oss
    format: conan
    notes: "conan"
    criteria:
      lastBlobUpdated: 60
      lastDownloaded: 120
      regexKey: "beta-*"
  - name: p2_cleanup_nexus_oss
    format: p2
    notes: "p2"
    criteria:
      lastBlobUpdated: 60
      lastDownloaded: 120
      regexKey: "beta-*"

nexus_repos_rubygems_hosted:
  - name: rubygems-hosted-1
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    cleanup:
      policyNames: []
  - name: rubygems-hosted-2
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames: []
  - name: rubygems-hosted-offline
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames:
        - rubygems_cleanup

nexus_repos_rubygems_proxy:
  - name: rubygems-proxy-1
    proxy:
      remoteUrl: https://rubygems.org
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: true
  - name: rubygems-proxy-2
    proxy:
      remoteUrl: https://rubygems.org
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
  - name: rubygems-proxy-3
    proxy:
      remoteUrl: https://rubygems.org
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440

nexus_repos_rubygems_group:
  - name: rubygems-group
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    group:
      memberNames:
        - rubygems-proxy-1
        - rubygems-proxy-2
        - rubygems-proxy-3
    routingRule: routing-rule-allow-all
  - name: rubygems-group-reverse-group-order
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    group:
      memberNames:
        - rubygems-proxy-3
        - rubygems-proxy-2
        - rubygems-proxy-1

nexus_repos_go_proxy:
  - name: go-proxy-1
    proxy:
      remoteUrl: https://gocenter.io
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: true
  - name: go-proxy-2
    proxy:
      remoteUrl: https://gocenter.io
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
  - name: go-proxy-3
    proxy:
      remoteUrl: https://gocenter.io
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440

nexus_repos_go_group:
  - name: go-group
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    group:
      memberNames:
        - go-proxy-1
        - go-proxy-2
        - go-proxy-3
    routingRule: routing-rule-allow-all
  - name: go-group-reverse-group-order
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    group:
      memberNames:
        - go-proxy-3
        - go-proxy-2
        - go-proxy-1

nexus_repos_conan_hosted:
  - name: conan-hosted-1
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    cleanup:
      policyNames: []
  - name: conan-hosted-2
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames: []
  - name: conan-hosted-offline
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames:
        - conan_cleanup

nexus_repos_conan_proxy:
  - name: conan-proxy-1
    proxy:
      remoteUrl: https://conan.bintray.com
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: true
  - name: conan-proxy-2
    proxy:
      remoteUrl: https://conan.bintray.com
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
  - name: conan-proxy-3
    proxy:
      remoteUrl: https://conan.bintray.com
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440

nexus_repos_cocoapods_proxy:
  - name: cocoa-proxy-1
    proxy:
      remoteUrl: https://cocoapods-specs
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: true
  - name: cocoa-proxy-2
    proxy:
      remoteUrl: https://cocoapods-specs
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
  - name: cocoa-proxy-3
    proxy:
      remoteUrl: https://cocoapods-specs
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440

nexus_repos_p2_proxy:
  - name: p2-proxy-1
    proxy:
      remoteUrl: http://download.eclipse.org/releases/2019-06
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: false
  - name: p2-proxy-2
    proxy:
      remoteUrl: http://download.eclipse.org/releases/2019-06
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
  - name: p2-proxy-3
    proxy:
      remoteUrl: http://download.eclipse.org/releases/2019-06
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440

nexus_repos_raw_hosted:
  - name: raw-hosted-1
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    cleanup:
      policyNames: []
  - name: raw-hosted-2
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames: []
  - name: raw-hosted-offline
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames:
        - raw_cleanup
    raw:
      contentDisposition: INLINE

nexus_repos_raw_proxy:
  - name: raw-proxy-1
    proxy:
      remoteUrl: http://example.com
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: false
  - name: raw-proxy-2
    proxy:
      remoteUrl: http://example.com
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
  - name: raw-proxy-3
    proxy:
      remoteUrl: http://example.com
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    raw:
      contentDisposition: INLINE

nexus_repos_raw_group:
  - name: raw-group
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    group:
      memberNames:
        - raw-proxy-1
        - raw-proxy-2
        - raw-proxy-3
        - raw-hosted-1
  - name: raw-group-reverse-group-order
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    group:
      memberNames:
        - raw-proxy-3
        - raw-proxy-2
        - raw-proxy-1
        - raw-hosted-1
    raw:
      contentDisposition: INLINE

nexus_repos_yum_hosted:
  - name: yum-hosted-1
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    cleanup:
      policyNames: []
    yum:
      repoDataDepth: 1
  - name: yum-hosted-2
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames: []
    yum:
      repoDataDepth: 1
  - name: yum-hosted-offline
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames:
        - yum_cleanup
    yum:
      repoDataDepth: 1

nexus_repos_yum_proxy:
  - name: yum-proxy-1
    proxy:
      remoteUrl: http://mirror.centos.org/centos/
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: false
  - name: yum-proxy-2
    proxy:
      remoteUrl: http://mirror.centos.org/centos/
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
  - name: yum-proxy-3
    proxy:
      remoteUrl: http://mirror.centos.org/centos/
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440

nexus_repos_yum_group:
  - name: yum-group
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    group:
      memberNames:
        - yum-proxy-1
        - yum-proxy-2
        - yum-proxy-3
        - yum-hosted-1
  - name: yum-group-reverse-group-order
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    group:
      memberNames:
        - yum-proxy-3
        - yum-proxy-2
        - yum-proxy-1
        - yum-hosted-1

nexus_repos_apt_hosted:
  - name: apt-hosted-1
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    cleanup:
      policyNames: []
    component:
      proprietaryComponents: true
  - name: apt-hosted-2
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames: []
    component:
      proprietaryComponents: false
  - name: apt-hosted-offline
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames:
        - apt_cleanup
    component:
      proprietaryComponents: false

nexus_repos_apt_proxy:
  - name: apt-proxy-1
    proxy:
      remoteUrl: http://archive.ubuntu.com/ubuntu/
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: false
  - name: apt-proxy-2
    proxy:
      remoteUrl: http://archive.ubuntu.com/ubuntu/
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
  - name: apt-proxy-flat-bionic
    proxy:
      remoteUrl: http://archive.ubuntu.com/ubuntu/
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    apt:
      distribution: bionic
      flat: true

nexus_repos_nuget_hosted:
  - name: nuget-hosted-1
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    cleanup:
      policyNames: []
    component:
      proprietaryComponents: true
  - name: nuget-hosted-2
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames: []
    component:
      proprietaryComponents: false
  - name: nuget-hosted-offline
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames:
        - nuget_cleanup
    component:
      proprietaryComponents: false

nexus_repos_nuget_proxy:
  - name: nuget-proxy-1
    proxy:
      remoteUrl: https://api.nuget.org/v3/index.json
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: true
  - name: nuget-proxy-2
    proxy:
      remoteUrl: https://api.nuget.org/v3/index.json
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
  - name: nuget-proxy-v2
    proxy:
      remoteUrl: https://api.nuget.org/v3/index.json
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    nugetProxy:
      nugetVersion: V2

nexus_repos_nuget_group:
  - name: nuget-group
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    group:
      memberNames:
        - nuget-proxy-1
        - nuget-proxy-2
        - nuget-proxy-v2
        - nuget-hosted-1
  - name: nuget-group-reverse-group-order
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    group:
      memberNames:
        - nuget-proxy-v2
        - nuget-proxy-2
        - nuget-proxy-1
        - nuget-hosted-1

nexus_repos_r_hosted:
  - name: r-hosted-1
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    cleanup:
      policyNames: []
    component:
      proprietaryComponents: true
  - name: r-hosted-2
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames: []
    component:
      proprietaryComponents: false
  - name: r-hosted-offline
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames:
        - r_cleanup
    component:
      proprietaryComponents: false

nexus_repos_r_proxy:
  - name: r-proxy-1
    proxy:
      remoteUrl: https://cloud.r-project.org
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: true
  - name: r-proxy-2
    proxy:
      remoteUrl: https://cloud.r-project.org
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
  - name: r-proxy-3
    proxy:
      remoteUrl: https://cloud.r-project.org
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440

nexus_repos_r_group:
  - name: r-group
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    group:
      memberNames:
        - r-proxy-1
        - r-proxy-2
        - r-proxy-3
        - r-hosted-1
  - name: r-group-reverse-group-order
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    group:
      memberNames:
        - r-proxy-3
        - r-proxy-2
        - r-proxy-1
        - r-hosted-1

nexus_repos_helm_hosted:
  - name: helm-hosted-1
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    cleanup:
      policyNames: []
    component:
      proprietaryComponents: true
  - name: helm-hosted-2
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames: []
    component:
      proprietaryComponents: false
  - name: helm-hosted-offline
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames:
        - helm_cleanup
    component:
      proprietaryComponents: false

nexus_repos_helm_proxy:
  - name: helm-proxy-1
    proxy:
      remoteUrl: https://kubernetes-charts.storage.googleapis.com
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: true
  - name: helm-proxy-2
    proxy:
      remoteUrl: https://kubernetes-charts.storage.googleapis.com
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
  - name: helm-proxy-3
    proxy:
      remoteUrl: https://kubernetes-charts.storage.googleapis.com
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440

nexus_repos_conda_proxy:
  - name: conda-proxy-1
    proxy:
      remoteUrl: https://repo.anaconda.com/pkgs/main
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: true
  - name: conda-proxy-2
    proxy:
      remoteUrl: https://repo.anaconda.com/pkgs/main
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
  - name: conda-proxy-3
    proxy:
      remoteUrl: https://repo.anaconda.com/pkgs/main
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440

nexus_repos_pypi_hosted:
  - name: pypi-hosted-1
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    cleanup:
      policyNames:
        - python_cleanup
    component:
      proprietaryComponents: true
  - name: pypi-hosted-2
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames:
        - python_cleanup
    component:
      proprietaryComponents: false
  - name: pypi-hosted-offline
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames:
        - python_cleanup
    component:
      proprietaryComponents: false

nexus_repos_pypi_proxy:
  - name: pypi-proxy-1
    proxy:
      remoteUrl: https://pypi.org/simple
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: true
  - name: pypi-proxy-2
    proxy:
      remoteUrl: https://pypi.org/simple
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
  - name: pypi-proxy-3
    proxy:
      remoteUrl: https://pypi.org/simple
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    pypi:
      removeQuarantined: false

nexus_repos_pypi_group:
  - name: pypi-group
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    group:
      memberNames:
        - pypi-proxy-1
        - pypi-proxy-2
        - pypi-proxy-3
        - pypi-hosted-1
  - name: pypi-group-reverse-group-order
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    group:
      memberNames:
        - pypi-proxy-3
        - pypi-proxy-2
        - pypi-proxy-1
        - pypi-hosted-1

nexus_repos_npm_hosted:
  - name: npm-hosted-1
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
  - name: npm-hosted-2
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
  - name: npm-hosted-offline
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false

nexus_repos_npm_proxy:
  - name: npm-proxy-1
    proxy:
      remoteUrl: https://registry.npmjs.org/
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: true
    npm:
      removeQuarantined: false
  - name: npm-proxy-2
    proxy:
      remoteUrl: https://registry.npmjs.org/
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
    npm:
      removeQuarantined: false
  - name: npm-proxy-3
    proxy:
      remoteUrl: https://registry.npmjs.org/
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440

nexus_repos_gitlfs_hosted:
  - name: new-format-minimal-gitlfs-hosted
  - name: legacy-format-minimal-gitlfs-hosted
    blob_store: default
    strict_content_validation: true
  - name: legacy-format-cleanup-gitlfs-hosted
    cleanup_policies:
      - gitlfs_cleanup_nexus_oss
      - gitlfs_cleanup_config_api
  - name: new-format-cleanup-reverse-order-gitlfs-hosted
    cleanup:
      policyNames:
        - gitlfs_cleanup_config_api
        - gitlfs_cleanup_nexus_oss
  - name: mixed-format-gitlfs-hosted
    blob_store: legacy-blobstore-complete
    storage:
      strictContentTypeValidation: false
    cleanup_policies:
      - gitlfs_cleanup_nexus_oss
  - name: full-new-format-gitlfs-hosted
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
      writePolicy: ALLOW
    cleanup:
      policyNames:
        - gitlfs_cleanup_config_api
        - gitlfs_cleanup_nexus_oss
    component:
      proprietaryComponents: true
  - name: full-legacy-format-gitlfs-hosted
    blob_store: legacy-blobstore-complete
    strict_content_validation: true
    cleanup_policies:
      - gitlfs_cleanup_nexus_oss
      - gitlfs_cleanup_config_api
    write_policy: ALLOW
    proprietary_components: true

nexus_repos_docker_hosted:
  # Minimal new format
  - name: new-format-minimal-docker-hosted

  # Minimal legacy format
  - name: legacy-format-minimal-docker-hosted
    blob_store: default
    strict_content_validation: true

  # Legacy format with cleanup
  - name: legacy-format-cleanup-docker-hosted
    blob_store: default
    strict_content_validation: true
    cleanup_policies:
      - docker_cleanup_nexus_oss

  # New format with cleanup in reverse order
  - name: new-format-cleanup-reverse-order-docker-hosted
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    cleanup:
      policyNames:
        - docker_cleanup_config_api
        - docker_cleanup_nexus_oss

  # Mixed format
  - name: mixed-format-docker-hosted
    blob_store: legacy-blobstore-complete
    storage:
      strictContentTypeValidation: false
    cleanup_policies:
      - docker_cleanup_nexus_oss

  # Fully complete new format
  - name: full-new-format-docker-hosted
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    cleanup:
      policyNames:
        - docker_cleanup_config_api
        - docker_cleanup_nexus_oss
    docker:
      httpPort: 5000
      v1Enabled: false
      forceBasicAuth: true

  # Fully complete legacy format
  - name: full-legacy-format-docker-hosted
    blob_store: legacy-blobstore-complete
    strict_content_validation: false
    cleanup_policies:
      - docker_cleanup_nexus_oss
    http_port: 5001
    v1_enabled: false
    force_basic_auth: true

nexus_repos_docker_proxy:
  # Minimal new format
  - name: new-format-minimal-docker-proxy
    proxy:
      remoteUrl: "https://registry-1.docker.io"

  # Minimal legacy format
  - name: legacy-format-minimal-docker-proxy
    remote_url: "https://registry-1.docker.io"
    blob_store: default
    strict_content_validation: true

  # Legacy format with authentication
  - name: legacy-format-basic-auth-docker-proxy
    remote_url: "https://secure-registry.docker.io"
    remote_username: "docker-user"
    remote_password: "docker-pass"

  # New format with NTLM authentication
  - name: new-format-ntlm-auth-docker-proxy
    proxy:
      remoteUrl: "https://ntlm-registry.docker.io"
    httpClient:
      authentication:
        type: ntlm
        username: "ntlm-user"
        password: "ntlm-pass"
        ntlmDomain: "ntlm-domain"
        ntlmHost: "ntlm-host"

  # Mixed format
  - name: mixed-format-docker-proxy
    remote_url: "https://registry.mixed.docker.io"
    proxy:
      contentMaxAge: 1440
    storage:
      blobStoreName: mixed-blobstore

  # Fully complete new format
  - name: full-new-format-docker-proxy
    online: true
    proxy:
      remoteUrl: "https://secure-complete-registry.docker.io"
      contentMaxAge: 60
      metadataMaxAge: 30
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    cleanup:
      policyNames:
        - docker_cleanup_config_api
    negativeCache:
      enabled: true
      timeToLive: 300
    httpClient:
      blocked: true
      autoBlock: true
      authentication:
        type: username
        username: "docker-complete-user"
        password: "docker-complete-pass"
      connection:
        retries: 5
        timeout: 60
        useTrustStore: true
        enableCookies: true
        enableCircularRedirects: true
        userAgentSuffix: "nexus-repository-manager"
    routingRule: "routing-rule-block-nmap"
    dockerProxy:
      indexType: CUSTOM
      indexUrl: "https://index.docker.io/"
      cacheForeignLayers: true
      foreignLayerUrlWhitelist:
        - "https://foreign-layer-1.docker.io"
        - "https://foreign-layer-2.docker.io"
    docker:
      httpPort: 6000
      httpsPort: 6001
      v1Enabled: true
      forceBasicAuth: false # setting this to true will block anonymous access
      subdomain: "docker-complete"

  # Fully complete legacy format
  - name: full-legacy-format-docker-proxy
    blob_store: mixed-blobstore
    blocked: true
    remote_url: "https://legacy-secure-registry.docker.io"
    strict_content_validation: true
    maximum_metadata_age: 30
    negative_cache_enabled: true
    negative_cache_ttl: 300
    remote_username: "legacy-docker-user"
    remote_password: "legacy-docker-pass"
    connection_retries: 4
    connection_timeout: 300
    enable_cookies: true
    enable_circular_redirects: true
    user_agent_suffix: legacy-agent
    use_trust_store: true
    cleanup_policies:
      - docker_cleanup_nexus_oss
    routing_rules: "routing-rule-block-nmap"
    http_port: 7000
    https_port: 7001
    sub_domain: "docker-legacy-subdomain"
    v1_enabled: true
    index_type: CUSTOM
    index_url: "https://index.docker.io/"
    force_basic_auth: false
    cache_foreign_layers: true
    foreign_layer_url_whitelist:
      - "https://foreign-layer-1.docker.io"
      - "https://foreign-layer-2.docker.io"

nexus_repos_docker_group:
  # Minimal new format
  - name: new-format-minimal-docker-group
    group:
      memberNames:
        - new-format-minimal-docker-hosted

  # Minimal legacy format
  - name: legacy-format-minimal-docker-group
    member_repos:
      - legacy-format-minimal-docker-hosted

  # Legacy format with hosted and proxy members
  - name: legacy-format-hosted-proxy-docker-group
    member_repos:
      - legacy-format-minimal-docker-hosted
      - legacy-format-minimal-docker-proxy

  # New format with hosted and proxy members
  - name: new-format-hosted-proxy-docker-group
    group:
      memberNames:
        - new-format-minimal-docker-hosted
        - new-format-minimal-docker-proxy

  # Mixed format
  - name: mixed-format-docker-group
    member_repos:
      - legacy-format-minimal-docker-hosted
    group:
      memberNames:
        - new-format-minimal-docker-proxy

  # Fully complete new format
  - name: full-new-format-docker-group
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    cleanup:
      policyNames:
        - docker_cleanup_config_api
    group:
      memberNames:
        - full-new-format-docker-hosted
        - full-new-format-docker-proxy
      writableMember: full-new-format-docker-hosted
    docker:
      httpPort: 4000
      httpsPort: 4001
      subdomain: "docker-group-complete"
      v1Enabled: true
      forceBasicAuth: false

  # Fully complete legacy format
  - name: full-legacy-format-docker-group
    blob_store: mixed-blobstore
    strict_content_validation: true
    cleanup_policies:
      - docker_cleanup_nexus_oss
    member_repos:
      - full-legacy-format-docker-hosted
      - full-legacy-format-docker-proxy
    writable_member_repo: full-legacy-format-docker-hosted
    http_port: 4002
    https_port: 4003
    sub_domain: "docker-legacy-group"
    v1_enabled: true
    force_basic_auth: false

nexus_repos_maven_hosted:
  # Minimal new format
  - name: new-format-minimal-maven-hosted

  # Minimal legacy format
  - name: legacy-format-minimal-maven-hosted
    blob_store: "legacy-minimal-blobstore"
    strict_content_validation: true

  # Legacy format with cleanup
  - name: legacy-format-cleanup
    blob_store: "custom-blobstore-legacy"
    strict_content_validation: false
    cleanup_policies:
      - legacy_cleanup_policy_1
      - legacy_cleanup_policy_2

  # New format with cleanup in reverse order
  - name: new-format-cleanup-reverse-order
    online: false
    storage:
      blobStoreName: "custom-blobstore-new"
      strictContentTypeValidation: false
    cleanup:
      policyNames:
        - cleanup-policy-new-1
        - cleanup-policy-new-2

  # Mixed format
  - name: mixed-format-maven-hosted
    blob_store: "mixed-blobstore"
    strict_content_validation: true
    cleanup:
      policyNames:
        - cleanup-policy-mixed-1
        - cleanup-policy-mixed-2
    maximum_component_age: 720
    storage:
      blobStoreName: "overridden-blobstore"
    maven:
      versionPolicy: SNAPSHOT
      layoutPolicy: PERMISSIVE
      contentDisposition: INLINE

  # Fully complete new format
  - name: full-new-format-maven-hosted
    online: true
    storage:
      blobStoreName: "default"
      strictContentTypeValidation: true
    cleanup:
      policyNames:
        - cleanup-policy-new-complete-1
        - cleanup-policy-new-complete-2
    maven:
      versionPolicy: RELEASE
      layoutPolicy: STRICT
      contentDisposition: ATTACHMENT
    component:
      proprietaryComponents: false

  # Fully complete legacy format
  - name: full-legacy-format-maven-hosted
    blob_store: "legacy-blobstore-complete"
    strict_content_validation: false
    cleanup_policies:
      - cleanup-policy-legacy-complete-1
      - cleanup-policy-legacy-complete-2
    version_policy: MIXED
    layout_policy: STRICT
    content_disposition: INLINE
    proprietary_components: true

nexus_repos_maven_proxy:
  # Minimal new format
  - name: new-format-minimal-maven-proxy
    proxy:
      remoteUrl: "https://repo1.maven.org/maven2/"

  # Minimal legacy format
  - name: legacy-format-minimal-maven-proxy
    remote_url: "https://repo1.maven.org/maven2/"

  # Legacy format with equivalent nested attributes
  - name: legacy-format-nested-attributes-maven-proxy
    remote_url: "https://repo.legacy.maven.org/maven2/"
    maximum_metadata_age: 1440
    maximum_component_age: -1
    negative_cache_enabled: true
    negative_cache_ttl: 720

  # Legacy format with basic authentication
  - name: legacy-format-basic-auth-maven-proxy
    remote_url: "https://repo.auth.maven.org/maven2/"
    remote_username: "basic-user"
    remote_password: "basic-pass"

  # New format with NTLM authentication
  - name: new-format-ntlm-auth-maven-proxy
    proxy:
      remoteUrl: "https://repo.ntlm.maven.org/maven2/"
    httpClient:
      authentication:
        type: ntlm
        username: "ntlm-user"
        password: "ntlm-pass"
        ntlmDomain: "ntlm-domain"
        ntlmHost: "ntlm-host"
        preemptive: true

  # Mixed format
  - name: mixed-format-maven-proxy
    remote_url: "https://repo.mixed.maven.org/maven2/"
    proxy:
      contentMaxAge: 1440
    storage:
      blobStoreName: default

  # Fully complete new format
  - name: full-new-format-maven-proxy
    online: true
    proxy:
      remoteUrl: "https://repo.complete.maven.org/maven2/"
      contentMaxAge: 1
      metadataMaxAge: 1
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    cleanup:
      policyNames:
        - maven_cleanup_config_api
        - mvn_cleanup_legacy_format
    negativeCache:
      enabled: true
      timeToLive: 300
    httpClient:
      blocked: true
      autoBlock: true
      authentication:
        type: username
        username: "full-auth-user"
        password: "full-auth-pass"
      connection:
        retries: 5
        timeout: 60
        useTrustStore: true
        enableCircularRedirects: true
        enableCookies: true
        userAgentSuffix: full-user-agent
    maven:
      versionPolicy: RELEASE
      layoutPolicy: PERMISSIVE
      contentDisposition: INLINE
    routingRule: routing-rule-block-nmap

  # Fully complete legacy format
  - name: full-legacy-format-maven-proxy
    blob_store: maven-legacy-blobstore
    remote_url: "https://repo.complete.maven.org/maven2/"
    maximum_metadata_age: 1
    maximum_component_age: 1
    negative_cache_enabled: true
    negative_cache_ttl: 300
    remote_username: "full-legacy-auth-user"
    remote_password: "full-legacy-auth-pass"
    ntlm_domain: "full-legacy-ntlm-domain"
    ntlm_host: "full-legacy-ntlm-host"
    preemptive: true
    connection_retries: 5
    connection_timeout: 60
    use_trust_store: true
    enable_circular_redirects: true
    enable_cookies: true
    user_agent_suffix: full-legacy-user-agent
    version_policy: RELEASE
    layout_policy: PERMISSIVE
    content_disposition: INLINE
    routing_rule: routing-rule-block-nmap

nexus_repos_maven_group:
  # Minimal new format
  - name: new-format-minimal-maven-group
    group:
      memberNames:
        - new-format-minimal-maven-hosted

  # Minimal legacy format
  - name: legacy-format-minimal-maven-group
    member_repos:
      - legacy-format-minimal-maven-hosted

  # Legacy format with both hosted and proxy members
  - name: legacy-format-hosted-proxy-maven-group
    member_repos:
      - legacy-format-minimal-maven-hosted
      - legacy-format-minimal-maven-proxy

  # New format with both hosted and proxy members
  - name: new-format-hosted-proxy-maven-group
    group:
      memberNames:
        - new-format-minimal-maven-hosted
        - new-format-minimal-maven-proxy

  # New format with both hosted and proxy members (reversed order)
  - name: new-format-hosted-proxy-maven-group-reversed
    group:
      memberNames:
        - new-format-minimal-maven-proxy
        - new-format-minimal-maven-hosted

  # Mixed format with a combination of legacy and new format members
  - name: mixed-format-maven-group
    storage:
      strictContentTypeValidation: true
    member_repos:
      - legacy-format-minimal-maven-hosted
      - new-format-minimal-maven-proxy

  # Fully complete new format
  - name: full-new-format-maven-group
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    cleanup:
      policyNames:
        - maven_cleanup_config_api
        - mvn_cleanup_legacy_format
    group:
      memberNames:
        - full-new-format-maven-hosted
        - full-new-format-maven-proxy

  # Fully complete legacy format
  - name: full-legacy-format-maven-group
    blob_store: legacy-minimal-blobstore
    strict_content_validation: false
    cleanup_policies:
      - mvn_cleanup_legacy_format
    member_repos:
      - full-legacy-format-maven-hosted
      - full-legacy-format-maven-proxy

nexus_repos_routing_rules:
  - name: routing-rule-block-nmap
    description: routing-rule-1
    mode: BLOCK
    matchers:
      - ".*nmap"
  - name: routing-rule-allow-patch-update
    description: rrouting-rule-2
    mode: ALLOW
    matchers:
      - ".*patch"
      - ".*update"
  - name: routing-rule-allow-all
    description: routing-rule-3
    mode: ALLOW
    matchers:
      - ".*"
  - name: routing-rule-block-all
    description: routing-rule-4
    mode: BLOCK
    matchers:
      - ".*"
